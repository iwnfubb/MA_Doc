\chapter{Einleitung}
Diese Masterarbeit beschäftigt sich mit der Erkennung von außergewöhnlichen Situationen, besonders bei älteren Menschen, die alleine lebend sind. Dazu wird zuerst eine Hintergrundsubtraktion auf das Bild einer Kamera angewendet, um das bewegte Objekt zu erfassen. Der Vordergrund trennt sich von dem Hintergrund durch die Hintergrundsubtraktion und wird in einem Binärbild dargestellt. Das dadurch erzeugte Binärbild wird mit dem Segmentierung-Verfahren in verschiedene Unterbilder (\acs{ROI}) geschnitten, um eine Silhouette des bewegten Objekts zu erzeugen. Dann wird eine Histogrammanalyse angewendet, um die Körperhaltung der Person aus der Silhouette zu bestimmen. Die Fuzzylogik kommt letztlich zum Einsatz, um abnormale Situationen zu bewerten. Eine Hintergrunddichte-Rechnung wird zusätzlich gemacht, um Drehbewegungen der Kamera zu erkennen. Bei Bewegungen der Kamera, werden die Hintergrundsubtraktion aktualisiert, damit eine richtige Erkennung der Person gewährleistet werden kann. Die OpenCV Bibliothek bietet effiziente Lösungen zur Hintergrundsubtraktion und ist mittels einer Open-Source-Lizenz veröffentlicht. Somit ist OpenCV Bibliothek ideal für diese Art von Bildverarbeitungen und wird in diesem Projekt eingesetzt. Im Rahmen dieser Arbeit wurden Algorithmen der OpenCV Bibliothek erweitert und angepasst.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Motivation}
Sicherheitssysteme werden durch rapide technologische Weiterentwicklungen immer zuverlässiger. Sie halten in immer mehr Bereichen des Lebens Einzug. Zum Beispiel kommt das neue eCall Sicherheitssystem von der eSafty-Initiative bei vielen Kraftfahrzeugen zum Einsatz. In der Europäischen Union wird dieses Sicherheitssystem ab dem 31. März 2018 für alle neuen Kraftfahrzeuge sogar zur Pflicht. Kraftfahrzeuge mit eingebautem eCall erkennen automatisch einen Verkehrsunfall und melden diesen über das einheitliche System zur Meldung eines Verkehrsunfalls. Auch in anderen Bereichen wie in Wohnungen siedelt sich immer mehr Smart-Technik an. Durch den Einzug von Smart-Systemen in die Wohnungen, kommen auch mehr Sicherheitssysteme mit. Sprachgesteuerte Systeme wie Google Home und Amazon Alexa sind schon beinahe Standard. Dazu kommen etliche Erweiterungen wie z.B.: Eine Kamera, um Skype anzusteuern und eine Video-Konferenz zu starten. Die Kamera kann dann auch der Person folgen, wenn diese sich im Raum bewegt und bietet somit sehr flexible Kommunikationsmöglichkeiten. Das ähnelt dem Prinzip des Smart-Home. Smart-Home ist ein großer Begriff, der im Wesentlichen bedeutet, dass das Zuhause über Sprachsteuerung oder andere Geräte steuerbar ist. Smart-Geräte sind sehr vielfältig. Es können smarte Toaster oder TVs an das Smart-Home angeschlossen werden und sind somit von der Ferne steuerbar. Auch die dadurch entstandenen Sicherheitssysteme sind aktiv und können aus der Ferne verwaltet werden. Zum Beispiel kann die Kamera, die für Video-Konferenzen genutzt wird, auch aus der Ferne aktiviert werden, um nach dem Rechten zu schauen. Dies ermöglicht auch automatisierte Systeme, das Smart-Home zu schützen, indem es durch die Kamera das Smart-Home überwacht und auf Einbrecher aufmerksam macht. Um solche Systeme zu entwickeln, braucht das Sicherheitssystem eine Personenerkennung. Diese muss mit einer guten Präzision arbeiten, um zum Beispiel Haustiere wie Hunde und Katzen nicht als Einbrecher zu erkennen. Jedoch können auch andere Sicherheitssysteme hier zum Einsatz kommen, die gezielt ältere Menschen schützt. So könnte das System ältere Menschen beim Umfallen erkennen und Hilfe anfordern. Besonders ältere Menschen sind durch das Hinfallen sehr gefährdet. Solche System verbessern die Sicherheit dieser Menschen, die sonst bei Unfällen hilflos wären und keinen Notruf selbst tätigen können. Viele Smart-Home Wohnungen besitzen bereits Kameras oder sogar fortschrittliche 360° Kameras. Die Motivation ist es hier anzusetzen und davon Gebrauch zu machen, um besonders das Leben von gefährdeten Menschen sicherer zu machen.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Ziele}\label{chp:Ziele}   
Das Ziel dieser Arbeit ist die Entwicklung einer Echtzeitanwendung, die in der Lage ist, Alltagssituationen über eine Kamera einzuschätzen und somit Unfälle automatisch zu erkennen und zu melden. Der Einsatz soll im Haus stattfinden, um Menschen schneller Hilfe leisten zu können. Die Zielgruppe besteht im Wesentlichen aus älteren Menschen, die alleine leben und auf schnelle Hilfe bei Hausunfällen angewiesen sind. Außerdem soll dieses Sicherheitssystem auch in der Lage sein, genauere Beschreibungen über den Zustand der Person zu liefern, die im Unfall verwickelt ist. Also soll auch erkannt werden, ob die Person bewusstlos ist oder eine andere Körperhaltung vorliegt. Wenn eine Person regungslos auf dem Boden liegt, sollen nach maximal 5 Sekunden die Rettungskräfte alarmiert werden.
%%%%%%%%%%%%%
\subsubsection{Reaktionszeit} 
Damit das Melden eines Unfalls in Echtzeit möglichst schnell geschieht, wird auf effiziente Methoden zurückgegriffen. Der Sollwert der Erkennung einer regungslosen Person liegt deutlich unter einer Sekunde. So wird eine Echtzeiterkennung garantiert und ein rechtzeitiges Handeln gewährleistet.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Aufbau der Arbeit}
Im ersten Kapitel \glqq{}Grundlagen\grqq{} werden verschiedene Theorien zur Hintergrundsubtraktion beschrieben. Im nächsten Abschnitt der Grundlagen wird die Histogrammanalyse im Allgemeinen beschrieben und wo sie zu verwenden ist. Weiter im Abschnitt 2.3 wird auf die Fuzzylogik eingegangen. Im Abschnitt 2.4 wird die Funktionalität des OpenCV Framework erläutert. Weiter im Abschnitt 2.5 \glqq{}Bosch Innenkamera\grqq{} wird die im Projekt eingesetzte Bosch Smart Home Kamera beschrieben. Im nächsten Kapitel \glqq{}Eigenes Verfahren\grqq{} werden zuerst die am häufigsten verwendeten Hintergrunds-Verfahren analysiert. Dann wird beschrieben, welches dieser Verfahren sich am Besten für dieses Projekt eignet. Weiter im Abschnitt 3.2 wird dann die Histogrammanalyse zur Erkennung der Körperhaltung beschrieben. Im Abschnitt 3.3 werden die Techniken zur Erkennung einer außergewöhnlichen Situation wie z.B. Hinfallen einer Person gezeigt. Im letzten Abschnitt des Kapitels wird erläutert, wie eine drehbare Kamera dazu verwendet wurde. Im Kapitel \glqq{}Ergebnisse und Evaluation\grqq{} werden verschiedene Laufzeitanalysen und die Zuverlässigkeit der Unfall-Erkennung diskutiert. Zuletzt wird eine Zusammenfassung dieser Masterarbeit aufgeführt und weitere Einsatzgebiete diskutiert. 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Verwandte Arbeiten}
\subsection{Erkennung außergewöhnlicher Situationen}
In \cite{alwan2006smart} hat der Autor ein Gerät entwickelt um Vibrationen des Bodens bei einem Sturz einer Person zu erkennen und von normalen Vibrationen der Alltagsbewegungen zu unterscheiden. Ein batteriebetriebener Funksender meldet den Sturz an eine Zentrale. Das Gerät hat eine sehr gute Erkennungsquote.\\
Beschleunigungsmesser werden in der Arbeit \cite{lindemann2005evaluation} verwendet, um den Sturz eines Menschen zu erkennen. Die Geräte sind so klein, dass sie in ein Hörgerätegehäuse integriert wurden. Im Prinzip messen die Geräte die Beschleunigung in xy-Ebenen, bevor ein Stoß passiert. Wenn die Summe der Beschleunigung aller räumlichen Komponenten höher als $6g$ und die Summe der Geschwindigkeit aller räumlichen Komponenten vor dem Aufschlag höher als 0,7$m/s$ ist, wird ein Alarm ausgelöst \cite{lindemann2005evaluation}.\\
Die Erkennung außergewöhnlicher Situationen in \cite{popescu2008acoustic} verwendet Mikrofone mit Akustiksensoren zur Erkennung der Aktivitäten und zur Analyse der Geräusche bei einem Unfall. Die Arbeit \cite{yavuz2010smartphone} nutzt die Sensoren eines Smartphones als Beschleunigungsmesser um einen Sturz zu detektieren. GPS und Internetverbindung des Telefons werden genutzt um die Position des Sturzes zu lokalisieren und den Vorfall an eine Zentrale zu melden.

\subsection{Hintergrundsubtraktion}
 Um sich auf die wesentlichen Bildinformationen einer Bewegung konzentrieren zu können, wird sehr häufig eine sogenannte Hintergrundsubtraktion gemacht. Diese Hintergrundsubtraktion ist auch ein wesentlicher Punkt dieser Arbeit. Durch die Hintergrundsubtraktion wird die Bewegung vor dem Hintergrund extrahiert und isoliert. Es gibt verschiedene wissenschaftliche Arbeiten, die mögliche Verfahren diskutieren. Ein gängiges Verfahren ist das \glqq{}Adaptive Background Mixture Models'\grqq{} \cite{784637}, das oft zur Segmentierung einer bewegten Region in Bildsequenzen genutzt wird. Die Methode nutzt die \glqq{}Hintergrundsubtraktion\grqq{} gefolgt durch eine Schwellwertbildung, um ein Binärbild zu erzeugen, in dem die bewegte Region in weiß dargestellt wird. In \cite{784637} wird das Modellieren jedes Pixels als eine Mischung von Gauß-Werten und das Aktualisieren des Hintergrundmodells durch eine Approximation realisiert. Die Gaußschen Verteilungen des adaptiven Mischungsmodells werden dann ausgewertet, um zu bestimmen, welches Pixel am wahrscheinlichsten zu einem Hintergrund gehört.
\\
In \cite{elgammal2000non} wird die Methode \glqq{}Kernel Density Estimation'\grqq{} (\acs{KDE}) besprochen. \acs{KDE} ist ein neuartiges nicht-parametrisches Hintergrundsubtraktionsverfahren. Das Modell kann mit Bildern umgehen, in denen der Hintergrund überladen und nicht vollständig statisch ist, sondern kleine Bewegung wie z.B. von Ästen und Blättern enthält. Das Modell berechnet die Wahrscheinlichkeit der Pixelintensitäten auf der Grundlage einer Stichprobe von Intensitäten für jeden Pixel. Das Modell in \cite{elgammal2000non} passt sich schnell an Veränderungen in der Szene an, was eine sehr empfindliche Erkennung bewegter Ziele ermöglicht.
\\
Eine verbesserte Version von \acs{KDE} ist in \cite{zivkovic2006efficient} als \glqq{}KNN\grqq{} Methode beschrieben. \acs{KDE} benutzt eine feste Kerngröße $D$ für die gesamte Dichtefunktion, deswegen liefert es nicht immer beste Ergebnisse zurück. Die Verbesserung passt die Kerngröße an jedem Pixel als Schätzpunkt an. Die konkrete Beschreibung befindet sich im nächsten Kapitel.
\\
In \cite{barnich2009vibe} und \cite{barnich2011vibe} wird \glqq{}Vibe\grqq{}, eine leistungsfähige Methode zur Hintergrundextraktion vorgestellt. Diese Methode verwendet eine zufällige Strategie zur Auswahl von Werten, um eine stichprobenartige Schätzung des Hintergrunds zu erstellen. Für jeden Pixel wird ein Satz von Werten gespeichert, die in der Vergangenheit am selben Ort oder in der Nachbarschaft entnommen wurden. Dann wird dieser Satz mit den aktuellen Pixel Werten verglichen, um zu bestimmen, ob dieser Pixel zum Hintergrund gehört. Das Modell von \glqq{}Vibe\grqq{} wird angepasst, indem aus dem Satz zufällig Werte ausgewählt werden, die aus dem Hintergrundmodell zu ersetzen sind. Dieses Verfahren ist das Erste, das rein zufällige Wahrscheinlichkeitsmethoden zur Hintergrundextraktion verwendet \cite{barnich2009vibe}.\\
Für diese Arbeit wurden die hier genannten Methoden verglichen, um eine für die gegebene Aufgabestellung geeignete Methode herauszufinden.\\
\subsection{Körperhaltungserkennung basierend auf der Histogrammanalyse}
Die Histogrammanalyse ist eine einfache und schnelle Methode, die zur Erkennung der Körperhaltung einer Person verwendet werden kann. Es gibt viele wissenschaftliche Arbeiten, die die Verwendung der Histogrammanalysen diskutieren, um die Körperhaltung einer Person zu bestimmen. In\cite{guo2006projection} wird ein Projektionshistogramm verwendet, um unterschiedliche Körperhaltungen unterscheiden zu können. Dieses Verfahren erkennt die Körperhaltung einer Person auf Bildern. Dieser Ansatz in \cite{guo2006projection} besteht aus drei Schlüsselmodulen: Hintergrundsubtraktion, Projektionshistogrammberechnung und Vorlagenabgleich.
\\
Eine andere Methode ist in \cite{haritaoglu1998ghost} beschrieben. Sie ist als \glqq{}Ghost\grqq{} System bekannt. \glqq{}Ghost\grqq{} ist ein Echtzeitsystem zum Schätzen der menschlichen Körperhaltung und zum Erfassen von Körperteilen. Es bestimmt die Position der Körperteile durch ein erstelltes silhouetten-basiertes Körpermodell, während sich Personen in generischen Positionen befinden. Diese Methode ist eine Kombination von einer hierarchischen Schätzung der Körperposen und einer Histogrammanalyse. Um die Silhouetten zu segmentieren, werden eine konvexe Rumpfanalyse und eine teilweise Abbildung verwendet \cite{haritaoglu1998ghost}. Die Schätzung der Körperhaltung in dieser Masterarbeit basiert auf der \glqq{}Ghost\grqq{}-Methode.

 
