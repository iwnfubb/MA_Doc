     \chapter{Zusammenfassung und Ausblick}
In diesem Projekt handelt es sich um eine Anwendung, die außergewöhnliche Situationen mit Hilfe einer Videokamera erkennen kann. Die Applikation orientiert sich an alten Menschen, die allein wohnen. Das Projekt ist eine Kombination von Hintergrundsubtraktion, Histogrammanalyse und Fuzzylogik. Im Rahmen dieser Arbeit wird ein Programm entwickelt, deren Eingaben die Bilder von einer 360° Kamera sind. Das Programm mit Hilfe von der Kamera beobachtet die Person im Alltag und gibt automatisch eine Meldung aus, wenn ein Unfall passiert.\\

Ziel dieses Projekt ist die Entwicklung eine Anwendung, das Videos einer 360° Kamera von Bosch verarbeitet. Das Programm soll eine Bewegung von einer Person erkennen, analysieren und Informationen geben, ob die Person in einer außergewöhnlichen Situation ist. Um eine abnormale Situation handelt es sich beispielsweise, wenn eine Person für längere Zeit an einem Ort liegt. Um dieses Ziel zu realisieren, wurde das Programm aus drei großen Meilensteinen gebaut (Abbildung \ref{fig:zusammenfassung}).

\begin{itemize}
	
\item{Erster Meilenstein:}
Der erste Meilenstein ist die Hintergrundsubtraktion. In diesem Schritt wird ein Bild als Input mit einem Hintergrundbild verglichen. Der Unterschied zwischen Eingabebild und Hintergrundbild wird zuerst berechnet und ein Binärbild des Vordergrundes wird danach zurückgeliefert. Das Binärbild stellt eine Silhouette der Person ohne den Hintergrund dar. Das normale Hintergrundsubtraktionsverfahren hat einen Nachteil: Wenn die Person sich lange nicht mehr bewegt, wird die Person in den Hintergrund integriert. Deswegen kann diese Anwendung nicht erkennen, wenn die sich Person nach einem Unfall nicht mehr bewegt. Eine eigene Methode wurde in diesem Projekt entwickelt. Die Methode aktualisiert nicht das ganze Hintergrundbild, sondern nur die Begrenzungsboxen. Dann werden diese Begrenzungsboxen, die vergangene Silhouetten enthalten, auf dem Hintergrundbild aktualisiert. Diese Methode wird \glqq{}Aktualisierung der selektiven Begrenzungsboxen\grqq{} (ASB) genannt. Obwohl die genannte Methode eine sich nicht bewegende Person erkennen kann, ergibt das Binärbild aber einiges Rauschen. Eine eigene Methode der Hintergrundsubtraktion wird erweitert. Diese Erweiterung ist eine Kombination von der ASB-Methode und der KNN-Methode aus der Arbeit \cite{zivkovic2006efficient} von Zivkovic. Diese Erweiterung wird \glqq{}KNN-Plus-ASB\grqq{} genannt. Bei Aktualisierung des Hintergrundmodells wird das Unterbild des Hintergrundbildes, auf dem es eine Bewegung gibt, nicht betrachtet. Diese Methode kann eine Person erkennen, obwohl die Person in der Szene sich nicht weiter bewegt. Im Vergleich zu der ASB-Methode liefert KNN-Plus-ASB bessere Silhouetten in diesem Anwendungsfall. 

\item{Zweiter Meilenstein:}
In dem zweiten Schritt wird die beschränkte Silhouette von dem letzten Schritt weiter analysiert, um die Körperhaltung der Person zu erkennen. Die Silhouette wird zuerst von der Breite oder Höhe auf 128 Pixel skaliert. Aus dem skalierten Bild werden vertikale und horizontale Histogramme gerechnet. Die Histogramme werden weiter mit Referenz-Histogrammen verglichen, die aus 4500 Silhouetten von 7 verschiedenen Personen mit 4 Körperhaltungen (Liegen, Stehen, Beugen, Sitzen) berechnet wurden \cite{haritaoglu1998ghost}. Nach dem Vergleich wird die Körperhaltung mit einem maximalen Wert von einer Loglikelihood-Funktion ausgewählt.

\item{Dritter Meilenstein:}
In letztem Schritt wird eine Fuzzylogik angewendet. Diese Methode berechnet, wie hoch die Wahrscheinlichkeit ist, dass eine Person unter bestimmten Bedingungen in einer abnormalen Situation ist. Mit Hilfe der Begrenzungsbox der Silhouette wird ein \inlinecode{C++}{Person}-Objekt aufgebaut, damit die Kamera die gleiche Person in der Szene verfolgen kann. Die Bedingung für einen abnormalen Fall ist: Wenn eine Person auf dem Boden in einem vordefinierten Zeitraum (für Testen sind 30 Bildern genommen, aber das Parameter kann für spezielle Fälle modifiziert werden) liegt und sich nicht mehr bewegt.\\

\end{itemize}
Ein Feature der Bosch-360-Grad Kamera ist die Fähigkeit, in die Richtigen der Bewegung zu orientieren. Nach der Drehung der Kamera wird das ganze Hintergrundmodell neu aktualisiert, um die Bewegung durch die Hintergrundsubtraktion richtig zu erkennen. Dies liefert nach Rotation des Kamerakopfes gleichbleibende Ergebnisse wie beim Stillstand der Kamera.\\
\begin{figure}[H]
	\centering
	\includegraphics[width=1\textwidth]{fig/zusammenfassung.pdf}
	\caption{Zusammenfassung des Programmaufbaus. Die drei wichtige Meilenstein werden zum Verständnis mit drei verschiedenen Farben dargestellt.}
	\label{fig:zusammenfassung}
\end{figure}
Um die Ergebnisse von dem Projekt zu evaluieren, wird jedes Testvideos während der Tests annotiert. Die Testergebnisse wurden mit unseren erwarteten Werten verglichen. Das Programm kann alle außergewöhnlichen Situationen richtig erkennen und die Körper-haltung der Person mit einer Genauigkeit von über $70\%$ schätzen. Die Herausforderung der Arbeit besteht darin, die Verarbeitungszeit möglichst gering zu halten. Bei einer durchschnittlichen Bearbeitungszeit von 109 Millisekunden pro Bild kann das Projekt als eine Echtzeitanwendung benutzt werden.\\

Es gibt in diesem Projekt noch ein paar Beschränkungen. Diese Anwendung erkennt eine Bewegung mit Hilfe von der Hintergrundsubtraktion, deswegen hat sie das gleiche Problem wie die Hintergrundsubtraktion. Wenn es eine optische Tarnung in der Szene gibt, kann das Programm keine richtige Silhouette erkennen (siehe Abbildung \ref{fig:tarnung}). Es folgt auch eine falsche Schätzung der Körperhaltung. Das zweite Problem ist: Wenn die Person weit weg von der Kamera ist, erkennt das Programm eine kleine Silhouette. Mit einer kleinen Silhouette kann die Anwendung die Schätzung der Körperhaltung nicht richtig berechnen.\\

\begin{figure}[H]
	\centering
	\includegraphics[width=1\textwidth]{fig/tarnung.png}
	\caption{Beispiele für die falsche Extraktion der Silhouette bei den Tarnungen. Auf den oberen Bildern ist die Testperson an einen schwarzen Kamin vorbeigegangen. In diesem Fall wurde die Person immer noch richtig erkannt. Auf dem unteren Bildern lief die Testperson an einem schwarzen Bildschirm vorbei. In diesem Fall wurde die Silhouette halbiert und es folgte eine falsche Erkennung der Testperson.}
	\label{fig:tarnung}
\end{figure}

Das Projekt hat viele Erweiterungspotenziale. Mir sind ein paar weitere Ideen eingefallen, um das Programm noch umfangreicher zu machen.  Die erste Idee basiert auf der Fähigkeit der Bewegungserkennung des Projektes. Die Kamera kann als ein Abwesenheitsmelder verwendet werden. Wenn es keine Bewegung in Haus in 24 Stunden gibt, dann wird eine Abwesenheitsmeldung ausgelöst oder ein Sicherheitsalarm wird automatisch angeschaltet. Meine zweite Idee ist eine Erweiterung des Projektes. Bis jetzt ist die Kamera noch nicht in die Smart Home App integriert. Wenn die Integration der Kamera mit der App realisiert wird, kann eine automatische Lichtschaltung oder Heizungsschaltung sofort nach Erkennung einer Bewegung aktiviert werden. Die dritte Idee ist eine Verbesserung des Projektes. Heutzutage wird künstliche Intelligenz überall verwendet. Mit Hilfe von neuronalen Netzen mit riesigem Datensätzen kann die Schätzung der Körperhaltung verbessert werden, womit sich die Qualität der Software auch deutlich erhöht.